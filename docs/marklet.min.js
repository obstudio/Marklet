!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){Vue.component("heading",n(1)),Vue.component("inlinelist",n(2)),Vue.component("nodes",n(3)),Vue.component("paragraph",n(4)),Vue.component("quote",n(5)),Vue.component("separator",n(6)),Vue.component("usages",n(7));const o=new Vue;Vue.prototype.$eventBus=o;const s=new class{constructor({url:e=`ws://${location.host}/`,retry:t=!0,timeout:n=5e3}={}){this.url=e,this.retry=t,this.timeout=n,this.ws=this.createWebSocket(),this.registerListeners()}createWebSocket(){return new WebSocket(this.url)}registerListeners(){this.ws.addEventListener("close",e=>{1e3!==e.code&&this.retry?(o.$emit("ws.reconnect"),setTimeout(()=>{this.ws=this.createWebSocket(),this.registerListeners()},this.timeout)):o.$emit("ws.close")}),this.ws.addEventListener("error",()=>{o.$emit("ws.error")}),this.ws.addEventListener("message",e=>{try{const{type:t,data:n}=JSON.parse(e.data);o.$emit("server.message",t,n),o.$emit("server.message."+t,n)}catch(e){o.$emit("server.error")}}),this.ws.addEventListener("open",()=>{o.$emit("ws.open")})}close(){this.ws.readyState<2&&this.ws.close()}};addEventListener("beforeunload",()=>s.close());const{DocLexer:r}=n(8);window.marklet={comp:{watch:n(10),edit:n(11)},parse:(e,t)=>new r(t).parse(e),start({el:e,type:t}){new Vue(this.comp[t]).$mount(e),document.title="Marklet - "+t}}},function(module,exports){module.exports.componentName="heading",module.exports.staticRenderFns=[],module.exports.render=function(){with(this)return _c("h"+node.level,{tag:"component",class:{centered:node.center},domProps:{innerHTML:_s(node.text)}})}},function(module,exports){module.exports.componentName="inlinelist",module.exports.mixins||(module.exports.mixins=[]),module.exports.mixins.push({mounted(){this.$el.setAttribute("id-i67ra2",""),this.$nextTick(()=>{})}}),module.exports.staticRenderFns=[],module.exports.render=function(){with(this)return _c("ul",_l(node.content,function(e,t){return _c("li",{key:t},[_v(_s(e))])}))}},function(module,exports){module.exports={props:{tag:{default:"div",type:String},content:{required:!0,type:Array}}},module.exports.componentName="nodes",module.exports.staticRenderFns=[],module.exports.render=function(){with(this)return _c(tag,{tag:"component"},_l(content,function(e,t){return _c(e.type,{key:t,tag:"component",class:e.type,attrs:{node:e}})}))}},function(module,exports){module.exports.componentName="paragraph",module.exports.mixins||(module.exports.mixins=[]),module.exports.mixins.push({mounted(){this.$el.setAttribute("id-apoqi1",""),this.$nextTick(()=>{})}}),module.exports.staticRenderFns=[],module.exports.render=function(){with(this)return _c("p",{domProps:{innerHTML:_s(node.text)}})}},function(module,exports){module.exports.componentName="quote",module.exports.mixins||(module.exports.mixins=[]),module.exports.mixins.push({mounted(){this.$el.setAttribute("id-lqz2ih",""),this.$nextTick(()=>{})}}),module.exports.staticRenderFns=[],module.exports.render=function(){with(this)return _c("nodes",{class:node.style,attrs:{tag:"blockquote",content:node.content}})}},function(module,exports){module.exports.componentName="separator",module.exports.mixins||(module.exports.mixins=[]),module.exports.mixins.push({mounted(){this.$el.setAttribute("id-awk80o",""),this.$nextTick(()=>{})}}),module.exports.staticRenderFns=[],module.exports.render=function(){with(this)return _c("hr",{class:[node.style,{thick:node.thick}]})}},function(module,exports){module.exports.componentName="usages",module.exports.mixins||(module.exports.mixins=[]),module.exports.mixins.push({mounted(){this.$el.setAttribute("id-rhjkur",""),this.$nextTick(()=>{})}}),module.exports.staticRenderFns=[],module.exports.render=function(){with(this)return _c("div",_l(node.content,function(e,t){return _c("blockquote",{key:t},[_l(e,function(e,t){return[_c(e.type,{key:t,tag:"component",attrs:{node:e}}),_v(" "),_c("br",{key:t})]})],2)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(9);t.DocLexer=class extends o.Lexer{constructor(e={}){super({main:[{type:"newline",regex:/\n+/,token:null},{type:"heading",regex:/(#{1,4}) +([^\n]+?)( +#)?/,eol:!0,token(e){let t,n;return this.config.header_align&&e[3]?(t=this.parse(e[2],"text").join(""),n=!0):(t=this.parse(e[2]+(e[3]||""),"text").join(""),n=!1),{level:e[1].length,text:t,center:n}}},{type:"section",test:"allow_section",regex:/(\^{1,4}) +([^\n]+?)/,eol:!0,push:"main",token(e){const t=this.parse(e[2],"text").join("");return{level:e[1].length,text:t}}},{type:"quote",regex:/>([\w-]*) +/,push:"block",token:(e,t)=>({style:e[1],content:t})},{type:"separator",regex:/ *([-=])(\1|\.\1| \1)\2+/,eol:!0,token:e=>({thick:"="===e[1],style:1===e[2].length?"normal":" "===e[2][0]?"dashed":"dotted"})},{type:"codeblock",regex:/ *(`{3,}) *([\w-]+)? *\n([\s\S]*?)\n? *\1/,eol:!0,token(e){return{lang:e[2]||this.config.default_language,text:e[3]||""}}},{type:"usages",regex:/(?= *\? )/,push:[{type:"usage",regex:/ *\? +([^\n]+?)/,eol:!0,push:[{regex:/(?= *\? )/,pop:!0},{include:"text"}],token(e,t){return{text:this.parse(e[1],"text").join(""),content:t}}},{pop:!0}]},{type:"list",regex:/ *(?={{bullet}} +[^\n]+)/,push:[{type:"item",regex:/( *)({{bullet}}) +(?=[^\n]+)/,push:[{regex:/\n? *(?={{bullet}} +[^\n]+)/,pop:!0},{include:"text"}],token:(e,t)=>({text:t.join(""),ordered:e[2].length>1,indent:e[1].length})},{pop:!0}],token:(e,t)=>(function(e){return e})(t)},{type:"inlinelist",regex:/(?=\+)/,push:[{type:"item",regex:/\+/,push:[{regex:/\+?$|\+\n(?=\+)|\+?(?=\n)|(?=\+)/,pop:!0},{include:"text"}],token:(e,t)=>t.join("")},{regex:/\n|$/,pop:!0}],token:(e,t)=>({content:t})},{type:"table",regex:/$^/,push:[],token:(e,t)=>({content:t})},{type:"paragraph",push:"text",token:(e,t)=>({text:t.join("")})}],block:[{regex:/\n[ \t]*\n/,pop:!0},{include:"main"}],text:[{type:"escape",regex:/\\([\s\S])/,token:e=>e[1]},{regex:/(?=\n[ \t]*(\n|$))/,pop:!0},{type:"newline",regex:/\n/,token:"<br/>"},{type:"code",regex:/(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,token:e=>`<code>${function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}(e[2])}</code>`},{type:"strikeout",regex:/-(?=\S)([\s\S]*?\S)-(?!-)/,token:e=>`<del>${e.next}</del>`},{type:"underline",regex:/_(?=\S)([\s\S]*?\S)_(?!_)/,token:e=>`<span style="text-decoration: underline">${e.next}</span>`},{type:"bold",regex:/\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,token:e=>`<strong>${e.next}</strong>`},{type:"italic",regex:/\*(?=\S)([\s\S]*?\S)\*(?!\*)/,token:e=>`<em>${e.next}</em>`},{type:"comment",regex:/\(\((?=\S)([\s\S]*?\S)\)\)(?!\))/,token:e=>`<span class="comment">${e.next}</span>`},{type:"package",regex:/{{(?=\S)([\s\S]*?\S)}}(?!})/,token:e=>`<code class="package">${e.next}</code>`},{type:"link",regex:/\[(?:([^\]|]+)\|)?([^\]]+)\]/,token(e){let t,n;return t=e[1]?e[1]:(n=e[2].match(/^\$\w+(#\w+)$/))?n[1]:e[2].includes("#")||e[2].includes("/")?e[2].match(/[#/]([^#/]+)$/)[1]:e[2],"!"===e[2][0]?`<img src="${e[2].slice(1)}" alt="${t}" title="${t}">`:`<a href="#" data-raw-url="${e[2]}" onclick="event.preventDefault()"'>${t}</a>`}}]},{macros:{bullet:/-|\d+\./},getters:{next(e){return this.parse(e.reverse().find(e=>!!e)||"").map(e=>e.text||e).join("")}},config:Object.assign({header_align:!0,allow_section:!0,default_language:""},e)})}}},function(e,t,n){"use strict";function o(e){return e instanceof RegExp?e.source:e}Object.defineProperty(t,"__esModule",{value:!0});t.Lexer=class{constructor(e,t={}){this.rules={},this._isRunning=!1,this.getters=t.getters||{},this.config=t.config||{},this.entrance=t.entrance||"main",this.default=t.default||"text",this.requireBound=!!t.requireBound;const n=t.macros||{},s={};for(const e in n)s[e]=o(n[e]);function r(e){if(!("include"in e)){void 0===e.regex&&(e.regex=/(?=[\s\S])/,e.type||(e.type="default")),void 0===e.test&&(e.test=!0);let t=o(e.regex),n="";for(const e in s)t=t.replace(new RegExp(`{{${e}}}`,"g"),`(?:${s[e]})`);if(e.flags=e.flags||"",e.flags.replace(/[biept]/g,""))throw new Error(`'${e.flags}' contains invalid rule flags.`);e.flags.includes("p")&&(e.pop=!0),e.flags.includes("b")&&(e.context_begins=!0),e.flags.includes("t")&&(e.top_level=!0),(e.flags.includes("e")||e.eol)&&(t+=" *(?:\\n+|$)"),(e.flags.includes("i")||e.ignore_case)&&(n+="i"),e.regex=new RegExp("^(?:"+t+")",n),e.push instanceof Array&&e.push.forEach(r)}return e}for(const t in e)this.rules[t]=e[t].map(r)}getContext(e){const t="string"==typeof e?this.rules[e]:e;if(!t)throw new Error(`Context '${e}' was not found.`);for(let e=t.length-1;e>=0;e-=1){const n=t[e];"include"in n&&t.splice(e,1,...this.getContext(n.include))}return t}_parse(e,t,n=!1){let o=0,s="";const r=[],i=this.getContext(t),u=this._warnings=[];for(e=e.replace(/\r\n/g,"\n");e;){let t=0;for(const c of i){if(c.top_level&&!n)continue;if(c.context_begins&&o)continue;let i=c.test;if("string"==typeof i?i="!"===i.charAt(0)?!this.config[i.slice(1)]:this.config[i]:"function"==typeof i&&(i=i.call(this,this.config)),!i)continue;const l=c.regex.exec(e);if(!l)continue;e=e.slice(l[0].length);const p=o;o+=l[0].length;const a=c.pop;t=a?2:1;let d=[],m=c.push;if("function"==typeof m&&(m=m.call(this,l)),m){const t=this._parse(e,m);d=t.result.map(e=>(this.requireBound&&"object"==typeof e&&(e.start+=o,e.end+=o),e)),u.concat(t.warnings),e=e.slice(t.index),o+=t.index}if(!a&&o===p)throw new Error(`Endless loop at '${e.slice(0,10)} ${e.length>10?"...":""}'.`);s&&(r.push(s),s="");let x=c.token;if("function"==typeof x){for(const e in this.getters)Object.defineProperty(l,e,{get:()=>this.getters[e].call(this,l)});x=x.call(this,l,d)}else void 0===x&&(m?x=d:a||(x=l[0]));x instanceof Array&&(x={content:x}),x&&("object"==typeof x&&(x.type=x.type||c.type,this.requireBound&&(x.start=p,x.end=o)),r.push(x));break}if(t||(s+=e.charAt(0),e=e.slice(1),o+=1),2===t)break}return s&&r.push(s),{index:o,result:r,warnings:u}}pushWarning(e){this._warnings.push({message:e})}parse(e,t){let n;return this._isRunning?n=this._parse(e,t||this.default).result:(this._isRunning=!0,n=this._parse(e,t||this.entrance,!0).result,this._isRunning=!1),n}}},function(module,exports){module.exports={data:()=>({nodes:[]}),created(){this.$eventBus.$on("server.message.document",e=>{this.nodes=window.marklet.parse(e)})}},module.exports.componentName="watch",module.exports.staticRenderFns=[],module.exports.render=function(){with(this)return _c("div",[_c("nodes",{attrs:{content:nodes}})],1)}},function(module,exports){module.exports={data:()=>({source:"",nodes:[]}),watch:{source(e){this.nodes=window.marklet.parse(e)}}},module.exports.componentName="edit",module.exports.staticRenderFns=[],module.exports.render=function(){with(this)return _c("div",[_c("textarea",{directives:[{name:"model",rawName:"v-model",value:source,expression:"source"}],domProps:{value:source},on:{input:function(e){e.target.composing||(source=e.target.value)}}}),_v(" "),_c("nodes",{attrs:{content:nodes}})],1)}}]);