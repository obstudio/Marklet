!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){Vue.component("heading",n(1)),Vue.component("inlinelist",n(3)),Vue.component("nodes",n(5)),Vue.component("paragraph",n(7)),Vue.component("quote",n(9)),Vue.component("separator",n(11)),Vue.component("usages",n(13));const r=new Vue;Vue.prototype.$eventBus=r;const o=new class{constructor({url:e=`ws://${location.host}/`,retry:t=!0,timeout:n=5e3}={}){this.url=e,this.retry=t,this.timeout=n,this.ws=this.createWebSocket(),this.registerListeners()}createWebSocket(){return new WebSocket(this.url)}registerListeners(){this.ws.addEventListener("close",e=>{1e3!==e.code&&this.retry?(r.$emit("ws.reconnect"),setTimeout(()=>{this.ws=this.createWebSocket(),this.registerListeners()},this.timeout)):r.$emit("ws.close")}),this.ws.addEventListener("error",()=>{r.$emit("ws.error")}),this.ws.addEventListener("message",e=>{try{const{type:t,data:n}=JSON.parse(e.data);r.$emit("server.message",t,n),r.$emit("server.message."+t,n)}catch(e){r.$emit("server.error")}}),this.ws.addEventListener("open",()=>{r.$emit("ws.open")})}close(){this.ws.readyState<2&&this.ws.close()}};addEventListener("beforeunload",()=>o.close());const{DocLexer:s}=n(15);window.marklet={comp:{watch:n(17),edit:n(19)},parse:(e,t)=>new s(t).parse(e),start({el:e,type:t}){new Vue(this.comp[t]).$mount(e),document.title="Marklet - "+t}}},function(module,exports,__webpack_require__){module.exports={...__webpack_require__(2),render:function anonymous(){with(this)return _c("h"+node.level,{tag:"component",class:{centered:node.center},domProps:{innerHTML:_s(node.text)}})},staticRenderFns:[]}},function(e,t){e.exports={props:["node"]}},function(module,exports,__webpack_require__){const data=__webpack_require__(4);(data.mixins||(data.mixins=[])).push({mounted(){this.$el.setAttribute("id-6d058b","")}}),module.exports={...data,render:function anonymous(){with(this)return _c("ul",_l(node.content,function(e,t){return _c("li",{key:t},[_v(_s(e))])}))},staticRenderFns:[]}},function(e,t){e.exports={props:["node"]}},function(module,exports,__webpack_require__){module.exports={...__webpack_require__(6),render:function anonymous(){with(this)return _c(tag,{tag:"component"},_l(content,function(e,t){return _c(e.type,{key:t,tag:"component",class:e.type,attrs:{node:e}})}))},staticRenderFns:[]}},function(e,t){e.exports={props:{tag:{default:"div",type:String},content:{required:!0,type:Array}}}},function(module,exports,__webpack_require__){const data=__webpack_require__(8);(data.mixins||(data.mixins=[])).push({mounted(){this.$el.setAttribute("id-93vwos","")}}),module.exports={...data,render:function anonymous(){with(this)return _c("p",{domProps:{innerHTML:_s(node.text)}})},staticRenderFns:[]}},function(e,t){e.exports={props:["node"]}},function(module,exports,__webpack_require__){const data=__webpack_require__(10);(data.mixins||(data.mixins=[])).push({mounted(){this.$el.setAttribute("id-28u6eh","")}}),module.exports={...data,render:function anonymous(){with(this)return _c("nodes",{class:node.style,attrs:{tag:"blockquote",content:node.content}})},staticRenderFns:[]}},function(e,t){e.exports={props:["node"]}},function(module,exports,__webpack_require__){const data=__webpack_require__(12);(data.mixins||(data.mixins=[])).push({mounted(){this.$el.setAttribute("id-fuvhza","")}}),module.exports={...data,render:function anonymous(){with(this)return _c("hr",{class:[node.style,{thick:node.thick}]})},staticRenderFns:[]}},function(e,t){e.exports={props:["node"]}},function(module,exports,__webpack_require__){const data=__webpack_require__(14);(data.mixins||(data.mixins=[])).push({mounted(){this.$el.setAttribute("id-bfaobn","")}}),module.exports={...data,render:function anonymous(){with(this)return _c("div",_l(node.content,function(e,t){return _c("blockquote",{key:t},[_l(e,function(e,t){return[_c(e.type,{key:t,tag:"component",attrs:{node:e}}),_v(" "),_c("br",{key:t})]})],2)}))},staticRenderFns:[]}},function(e,t){e.exports={props:["node"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16);t.DocLexer=class extends r.Lexer{constructor(e={}){super({main:[{type:"newline",regex:/\n+/,token:null},{type:"heading",regex:/(#{1,4}) +([^\n]+?)( +#)?/,eol:!0,token(e){let t,n;return this.config.header_align&&e[3]?(t=this.parse(e[2],"text").join(""),n=!0):(t=this.parse(e[2]+(e[3]||""),"text").join(""),n=!1),{level:e[1].length,text:t,center:n}}},{type:"section",test:"allow_section",regex:/(\^{1,4}) +([^\n]+?)/,eol:!0,push:"main",token(e){const t=this.parse(e[2],"text").join("");return{level:e[1].length,text:t}}},{type:"quote",regex:/>([\w-]*) +/,push:"block",token:(e,t)=>({style:e[1],content:t})},{type:"separator",regex:/ *([-=])(\1|\.\1| \1)\2+/,eol:!0,token:e=>({thick:"="===e[1],style:1===e[2].length?"normal":" "===e[2][0]?"dashed":"dotted"})},{type:"codeblock",regex:/ *(`{3,}) *([\w-]+)? *\n([\s\S]*?)\n? *\1/,eol:!0,token(e){return{lang:e[2]||this.config.default_language,text:e[3]||""}}},{type:"usages",regex:/(?= *\? )/,push:[{type:"usage",regex:/ *\? +([^\n]+?)/,eol:!0,push:[{regex:/(?= *\? )/,pop:!0},{include:"text"}],token(e,t){return{text:this.parse(e[1],"text").join(""),content:t}}},{pop:!0}]},{type:"list",regex:/ *(?={{bullet}} +[^\n]+)/,push:[{type:"item",regex:/( *)({{bullet}}) +(?=[^\n]+)/,push:[{regex:/\n? *(?={{bullet}} +[^\n]+)/,pop:!0},{include:"text"}],token:(e,t)=>({text:t.join(""),ordered:e[2].length>1,indent:e[1].length})},{pop:!0}],token:(e,t)=>(function(e){return e})(t)},{type:"inlinelist",regex:/(?=\+)/,push:[{type:"item",regex:/\+/,push:[{regex:/\+?$|\+\n(?=\+)|\+?(?=\n)|(?=\+)/,pop:!0},{include:"text"}],token:(e,t)=>t.join("")},{regex:/\n|$/,pop:!0}],token:(e,t)=>({content:t})},{type:"table",regex:/$^/,push:[],token:(e,t)=>({content:t})},{type:"paragraph",push:"text",token:(e,t)=>({text:t.join("")})}],block:[{regex:/\n[ \t]*\n/,pop:!0},{include:"main"}],text:[{type:"escape",regex:/\\([\s\S])/,token:e=>e[1]},{regex:/(?=\n[ \t]*(\n|$))/,pop:!0},{type:"newline",regex:/\n/,token:"<br/>"},{type:"code",regex:/(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,token:e=>`<code>${function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}(e[2])}</code>`},{type:"strikeout",regex:/-(?=\S)([\s\S]*?\S)-(?!-)/,token:e=>`<del>${e.next}</del>`},{type:"underline",regex:/_(?=\S)([\s\S]*?\S)_(?!_)/,token:e=>`<span style="text-decoration: underline">${e.next}</span>`},{type:"bold",regex:/\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,token:e=>`<strong>${e.next}</strong>`},{type:"italic",regex:/\*(?=\S)([\s\S]*?\S)\*(?!\*)/,token:e=>`<em>${e.next}</em>`},{type:"comment",regex:/\(\((?=\S)([\s\S]*?\S)\)\)(?!\))/,token:e=>`<span class="comment">${e.next}</span>`},{type:"package",regex:/{{(?=\S)([\s\S]*?\S)}}(?!})/,token:e=>`<code class="package">${e.next}</code>`},{type:"link",regex:/\[(?:([^\]|]+)\|)?([^\]]+)\]/,token(e){let t,n;return t=e[1]?e[1]:(n=e[2].match(/^\$\w+(#\w+)$/))?n[1]:e[2].includes("#")||e[2].includes("/")?e[2].match(/[#/]([^#/]+)$/)[1]:e[2],"!"===e[2][0]?`<img src="${e[2].slice(1)}" alt="${t}" title="${t}">`:`<a href="#" data-raw-url="${e[2]}" onclick="event.preventDefault()"'>${t}</a>`}}]},{macros:{bullet:/-|\d+\./},getters:{next(e){return this.parse(e.reverse().find(e=>!!e)||"").map(e=>e.text||e).join("")}},config:Object.assign({header_align:!0,allow_section:!0,default_language:""},e)})}}},function(e,t,n){"use strict";function r(e){return e instanceof RegExp?e.source:e}Object.defineProperty(t,"__esModule",{value:!0});t.Lexer=class{constructor(e,t={}){this.rules={},this._isRunning=!1,this.getters=t.getters||{},this.config=t.config||{},this.entrance=t.entrance||"main",this.default=t.default||"text",this.requireBound=!!t.requireBound;const n=t.macros||{},o={};for(const e in n)o[e]=r(n[e]);function s(e){if(!("include"in e)){void 0===e.regex&&(e.regex=/(?=[\s\S])/,e.type||(e.type="default")),void 0===e.test&&(e.test=!0);let t=r(e.regex),n="";for(const e in o)t=t.replace(new RegExp(`{{${e}}}`,"g"),`(?:${o[e]})`);if(e.flags=e.flags||"",e.flags.replace(/[biept]/g,""))throw new Error(`'${e.flags}' contains invalid rule flags.`);e.flags.includes("p")&&(e.pop=!0),e.flags.includes("b")&&(e.context_begins=!0),e.flags.includes("t")&&(e.top_level=!0),(e.flags.includes("e")||e.eol)&&(t+=" *(?:\\n+|$)"),(e.flags.includes("i")||e.ignore_case)&&(n+="i"),e.regex=new RegExp("^(?:"+t+")",n),e.push instanceof Array&&e.push.forEach(s)}return e}for(const t in e)this.rules[t]=e[t].map(s)}getContext(e){const t="string"==typeof e?this.rules[e]:e;if(!t)throw new Error(`Context '${e}' was not found.`);for(let e=t.length-1;e>=0;e-=1){const n=t[e];"include"in n&&t.splice(e,1,...this.getContext(n.include))}return t}_parse(e,t,n=!1){let r=0,o="";const s=[],i=this.getContext(t),c=this._warnings=[];for(e=e.replace(/\r\n/g,"\n");e;){let t=0;for(const a of i){if(a.top_level&&!n)continue;if(a.context_begins&&r)continue;let i=a.test;if("string"==typeof i?i="!"===i.charAt(0)?!this.config[i.slice(1)]:this.config[i]:"function"==typeof i&&(i=i.call(this,this.config)),!i)continue;const u=a.regex.exec(e);if(!u)continue;e=e.slice(u[0].length);const l=r;r+=u[0].length;const p=a.pop;t=p?2:1;let d=[],_=a.push;if("function"==typeof _&&(_=_.call(this,u)),_){const t=this._parse(e,_);d=t.result.map(e=>(this.requireBound&&"object"==typeof e&&(e.start+=r,e.end+=r),e)),c.concat(t.warnings),e=e.slice(t.index),r+=t.index}if(!p&&r===l)throw new Error(`Endless loop at '${e.slice(0,10)} ${e.length>10?"...":""}'.`);o&&(s.push(o),o="");let h=a.token;if("function"==typeof h){for(const e in this.getters)Object.defineProperty(u,e,{get:()=>this.getters[e].call(this,u)});h=h.call(this,u,d)}else void 0===h&&(_?h=d:p||(h=u[0]));h instanceof Array&&(h={content:h}),h&&("object"==typeof h&&(h.type=h.type||a.type,this.requireBound&&(h.start=l,h.end=r)),s.push(h));break}if(t||(o+=e.charAt(0),e=e.slice(1),r+=1),2===t)break}return o&&s.push(o),{index:r,result:s,warnings:c}}pushWarning(e){this._warnings.push({message:e})}parse(e,t){let n;return this._isRunning?n=this._parse(e,t||this.default).result:(this._isRunning=!0,n=this._parse(e,t||this.entrance,!0).result,this._isRunning=!1),n}}},function(module,exports,__webpack_require__){module.exports={...__webpack_require__(18),render:function anonymous(){with(this)return _c("div",[_c("nodes",{attrs:{content:nodes}})],1)},staticRenderFns:[]}},function(e,t){e.exports={data:()=>({nodes:[]}),created(){this.$eventBus.$on("server.message.document",e=>{this.nodes=window.marklet.parse(e)})}}},function(module,exports,__webpack_require__){module.exports={...__webpack_require__(20),render:function anonymous(){with(this)return _c("div",[_c("textarea",{directives:[{name:"model",rawName:"v-model",value:source,expression:"source"}],domProps:{value:source},on:{input:function(e){e.target.composing||(source=e.target.value)}}}),_v(" "),_c("nodes",{attrs:{content:nodes}})],1)},staticRenderFns:[]}},function(e,t){e.exports={data:()=>({source:"",nodes:[]}),watch:{source(e){this.nodes=window.marklet.parse(e)}}}}]);